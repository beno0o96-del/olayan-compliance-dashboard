<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategic Board - Olayan</title>
    <link rel="stylesheet" href="style-base.css">
    <link rel="stylesheet" href="style-home.css">
    <link rel="stylesheet" href="style-trend.css">
    <link rel="stylesheet" href="style-violations.css">
    <link rel="stylesheet" href="style-complex-dashboard.css">
    <link rel="icon" type="image/svg+xml" href="olayan-mark.svg">
    <script src="app.js?v=4" defer></script>
    <script src="od_config.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@azure/msal-browser@2.37.0/dist/msal-browser.min.js" defer></script>
    <script src="onedrive_activity.js" defer></script>
    <script src="github_activity.js" defer></script>
    <style>
        /* Override body background for this specific dashboard for a deeper feel */
        body {
            background-color: #0b0e2b;
            color: #fff;
        }
        
        .board-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Modern Grid Layout */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-top: 30px;
        }

        .grid-col-2 { grid-column: span 2; }
        .grid-col-3 { grid-column: span 3; }
        .grid-col-4 { grid-column: span 4; }

        @media (max-width: 1200px) {
            .dashboard-grid { grid-template-columns: repeat(2, 1fr); }
            .grid-col-3 { grid-column: span 2; }
        }
        @media (max-width: 768px) {
            .dashboard-grid { grid-template-columns: 1fr; }
            .grid-col-2, .grid-col-3, .grid-col-4 { grid-column: span 1; }
        }

        /* Stat Cards Modern */
        .stat-card-modern {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.6), rgba(15, 23, 42, 0.8));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease;
        }
        .stat-card-modern:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 255, 255, 0.1);
        }
        .stat-card-modern::after {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 100px; height: 100px;
            background: radial-gradient(circle at top right, rgba(255,255,255,0.05), transparent 70%);
            border-radius: 0 20px 0 100%;
        }

        .stat-label { color: #94a3b8; font-size: 0.9rem; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
        .stat-value { font-size: 2.2rem; font-weight: 700; color: #fff; margin-bottom: 8px; }
        .stat-trend { font-size: 0.85rem; display: flex; align-items: center; gap: 5px; }
        .trend-up { color: #10b981; }
        .trend-down { color: #ef4444; }

        /* Chart Card */
        .chart-card {
            background: #16213e;
            border-radius: 20px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            padding-bottom: 15px;
        }
        .chart-title { font-size: 1.1rem; font-weight: 600; color: #f1f5f9; display: flex; align-items: center; gap: 10px; }
        
        /* Table Styles */
        .modern-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        .modern-table th { text-align: left; padding: 12px; color: #94a3b8; font-weight: 500; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .modern-table td { padding: 12px; color: #e2e8f0; border-bottom: 1px solid rgba(255,255,255,0.02); }
        .modern-table tr:last-child td { border-bottom: none; }
        .modern-table tr:hover td { background: rgba(255,255,255,0.02); }

        /* Neon Text */
        .neon-text-blue { color: #4facfe; text-shadow: 0 0 10px rgba(79, 172, 254, 0.5); }
        .neon-text-purple { color: #a18cd1; text-shadow: 0 0 10px rgba(161, 140, 209, 0.5); }
    </style>
</head>
<body class="en complex-dashboard">
    
    <!-- Header Bar -->
    <div class="brand-bar" style="background: rgba(11, 14, 43, 0.9); backdrop-filter: blur(10px);">
      <img src="olayan-logo.png" alt="Olayan">
      <span class="brand-name">Olayan Strategic Dashboard</span>
      <span class="brand-info" id="file-activity"></span>
    </div>

    <!-- Hamburger Button -->
    <button class="hamburger-btn" onclick="toggleMenu()">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    </button>

    <!-- Sliding Side Menu -->
    <div class="side-menu-overlay" id="sideMenuOverlay" onclick="toggleMenu()"></div>
    <aside class="side-menu" id="sideMenu">
        <div class="side-menu-header">
            <img src="olayan-logo.png" class="side-menu-logo" alt="Logo">
            <button class="close-menu-btn" onclick="toggleMenu()">&times;</button>
        </div>
        <nav class="side-menu-nav">
            <a href="index.html" class="side-link"><i>üè†</i> <span data-en="Home" data-ar="ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©">Home</span></a>
            <a href="violations.html" class="side-link"><i>‚ö†Ô∏è</i> <span data-en="Violations" data-ar="ÿßŸÑŸÖÿÆÿßŸÑŸÅÿßÿ™">Violations</span></a>
            <a href="training.html" class="side-link"><i>üéì</i> <span data-en="Training" data-ar="ÿßŸÑÿ™ÿØÿ±Ÿäÿ®">Training</span></a>
            <a href="branches.html" class="side-link"><i>üè¨</i> <span data-en="Branches" data-ar="ÿßŸÑŸÅÿ±Ÿàÿπ">Branches</span></a>
            <a href="board.html" class="side-link active"><i>üìä</i> <span data-en="Management Report" data-ar="ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ•ÿØÿßÿ±ÿ©">Management Report</span></a>
            <a href="employees.html" class="side-link"><i>üë•</i> <span data-en="Employees" data-ar="ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ">Employees</span></a>
            <a href="tasks.html" class="side-link"><i>‚úÖ</i> <span data-en="Tasks" data-ar="ÿßŸÑŸÖŸáÿßŸÖ">Tasks</span></a>
            <a href="login.html" class="side-link"><i>üîê</i> <span data-en="Login" data-ar="ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ">Login</span></a>
        </nav>
        <div style="margin-top: auto; padding-top: 20px;">
            <div class="lang-switch" style="display: flex; gap: 10px; justify-content: center;"> 
                <button class="lang-btn" onclick="setLang('ar')" style="flex:1;">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button> 
                <button class="lang-btn" onclick="setLang('en')" style="flex:1;">English</button> 
            </div>
        </div>
    </aside>

    <div class="board-container" style="padding-top: 80px;">
        
        <!-- Header Section -->
        <div style="margin-bottom: 30px; display:flex; justify-content:space-between; align-items:flex-end;">
            <div>
                <h1 style="font-size: 2rem; margin:0; background: linear-gradient(to right, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Strategic Performance Overview</h1>
                <p style="color: #64748b; margin: 5px 0 0 0;">Real-time insights and operational metrics</p>
            </div>
            <div style="text-align: right;">
                <span style="background: rgba(16, 185, 129, 0.1); color: #10b981; padding: 5px 12px; border-radius: 20px; font-size: 0.85rem; border: 1px solid rgba(16, 185, 129, 0.2);">‚óè System Active</span>
            </div>
        </div>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            
            <!-- Metrics Row (New) -->
            <div class="grid-col-4" id="b-metrics-row" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 10px;">
                <!-- Dynamic Content -->
            </div>
            
            <!-- KPI 1 -->
            <div class="stat-card-modern">
                <div>
                    <div class="stat-label" data-en="ROI" data-ar="ÿßŸÑÿπÿßÿ¶ÿØ ÿπŸÑŸâ ÿßŸÑÿßÿ≥ÿ™ÿ´ŸÖÿßÿ±">ROI</div>
                    <div class="stat-value" id="b-kpi-roi">37.8%</div>
                </div>
                <div class="stat-trend trend-up">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z"/></svg>
                    <span>+2.4% vs last month</span>
                </div>
            </div>

            <!-- KPI 2 -->
            <div class="stat-card-modern">
                <div>
                    <div class="stat-label" data-en="Effectiveness" data-ar="ÿßŸÑŸÉŸÅÿßÿ°ÿ© ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑŸäÿ©">Effectiveness</div>
                    <div class="stat-value" id="b-kpi-eff">93.0%</div>
                </div>
                <div class="stat-trend trend-up" style="color: #fbbf24;">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"/></svg>
                    <span>Stable Performance</span>
                </div>
            </div>

            <!-- KPI 3 -->
            <div class="stat-card-modern">
                <div>
                    <div class="stat-label" data-en="Risk Score" data-ar="ŸÖÿ§ÿ¥ÿ± ÿßŸÑŸÖÿÆÿßÿ∑ÿ±">Risk Score</div>
                    <div class="stat-value" id="b-kpi-risk">12.0</div>
                </div>
                <div class="stat-trend trend-down">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"/></svg>
                    <span>-1.5 points (Improved)</span>
                </div>
            </div>

            <!-- KPI 4 -->
            <div class="stat-card-modern">
                <div>
                    <div class="stat-label" data-en="Active Branches" data-ar="ÿßŸÑŸÅÿ±Ÿàÿπ ÿßŸÑŸÜÿ¥ÿ∑ÿ©">Active Branches</div>
                    <div class="stat-value">42</div>
                </div>
                <div class="stat-trend trend-up" style="color: #4facfe;">
                    <span>100% Operational</span>
                </div>
            </div>

            <!-- Financial Table -->
            <div class="chart-card grid-col-2">
                <div class="chart-header">
                    <div class="chart-title">
                        <span class="neon-text-blue">üí≤</span> <span data-en="Financial Performance" data-ar="ÿßŸÑÿ£ÿØÿßÿ° ÿßŸÑŸÖÿßŸÑŸä">Financial Performance</span>
                    </div>
                </div>
                <table class="modern-table" id="b-table-revenue">
                    <thead>
                        <tr>
                            <th>Sector</th>
                            <th>Actual</th>
                            <th>Target</th>
                            <th>% Var</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic Content -->
                    </tbody>
                </table>
            </div>

            <!-- Financial Table (Expenses) -->
            <div class="chart-card grid-col-2">
                <div class="chart-header">
                    <div class="chart-title">
                        <span class="neon-text-blue">üìâ</span> <span data-en="Operational Expenses" data-ar="ÿßŸÑŸÖÿµÿßÿ±ŸäŸÅ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑŸäÿ©">Operational Expenses</span>
                    </div>
                </div>
                <table class="modern-table" id="b-table-expenses">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Actual</th>
                            <th>Budget</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic Content -->
                    </tbody>
                </table>
            </div>

            <!-- Regional Radar (Modified) -->
            <div class="chart-card grid-col-2">
                <div class="chart-header">
                    <div class="chart-title">
                        <span class="neon-text-purple">üéØ</span> <span data-en="Regional Compliance" data-ar="ÿßŸÑÿßŸÖÿ™ÿ´ÿßŸÑ ÿßŸÑÿ•ŸÇŸÑŸäŸÖŸä">Regional Compliance</span>
                    </div>
                    <div class="region-tabs">
                        <button class="r-tab active" onclick="switchRegion('western', this)">West</button>
                        <button class="r-tab" onclick="switchRegion('central', this)">Central</button>
                        <button class="r-tab" onclick="switchRegion('eastern', this)">Eastern</button>
                        <button class="r-tab" onclick="switchRegion('southern', this)">Southern</button>
                    </div>
                </div>
                <div style="display: flex; gap: 20px; align-items: center;">
                    <div class="radar" style="width: 150px; height: 150px; margin: 0 auto;">
                        <div class="sweep"></div>
                        <div class="blip blip-1"></div>
                        <div class="blip blip-2"></div>
                    </div>
                    <div class="radar-list" id="b-violations-list" style="flex: 1;">
                        <!-- Dynamic Content -->
                    </div>
                </div>
            </div>

            <!-- Gauges Row -->
            <div class="chart-card grid-col-4">
                <div class="chart-header">
                    <div class="chart-title">
                        <span data-en="Operational Health" data-ar="ÿßŸÑÿµÿ≠ÿ© ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑŸäÿ©">Operational Health</span>
                    </div>
                </div>
                <div class="gauge-grid" id="b-gauge-grid">
                    <div class="gauge-item">
                        <div class="gauge-circle" style="--p: 67deg; --c: #4facfe;">
                            <div class="gauge-inner">67%</div>
                        </div>
                        <span>Western</span>
                    </div>
                    <div class="gauge-item">
                        <div class="gauge-circle" style="--p: 85deg; --c: #a18cd1;">
                            <div class="gauge-inner">85%</div>
                        </div>
                        <span>Central</span>
                    </div>
                    <div class="gauge-item">
                        <div class="gauge-circle" style="--p: 92deg; --c: #00f260;">
                            <div class="gauge-inner">92%</div>
                        </div>
                        <span>Eastern</span>
                    </div>
                </div>
            </div>

            <!-- Flower Grid (SWOT) -->
            <div class="chart-card grid-col-2">
                <div class="chart-header">
                    <div class="chart-title">
                        <span data-en="Strategic SWOT Analysis" data-ar="ÿ™ÿ≠ŸÑŸäŸÑ SWOT ÿßŸÑÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿä">Strategic SWOT Analysis</span>
                    </div>
                </div>
                <div class="flower-grid" id="b-flower-grid">
                    <!-- Dynamic Content -->
                </div>
            </div>

            <!-- Trend Chart -->
            <div class="chart-card grid-col-2">
                <div class="chart-header">
                    <div class="chart-title">
                        <span data-en="Monthly Trend" data-ar="ÿßŸÑÿßÿ™ÿ¨ÿßŸá ÿßŸÑÿ¥Ÿáÿ±Ÿä">Monthly Trend</span>
                    </div>
                </div>
                <div class="trend-bar-container" id="b-trend-monthly" style="height: 200px;">
                    <!-- Dynamic Content -->
                </div>
            </div>

             <!-- Brand Performance Chart -->
             <div class="chart-card grid-col-2">
                <div class="chart-header">
                    <div class="chart-title">
                        <span class="neon-text-blue">üè∑Ô∏è</span> <span data-en="Brand Performance" data-ar="ÿ£ÿØÿßÿ° ÿßŸÑÿπŸÑÿßŸÖÿßÿ™ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©">Brand Performance</span>
                    </div>
                </div>
                <div class="s-bar-container" id="b-brand-chart" style="height: 200px; display: flex; align-items: flex-end; gap: 20px; padding-top: 20px;">
                    <!-- Dynamic Content -->
                </div>
            </div>

            <!-- Department Performance (Stars) -->
            <div class="chart-card grid-col-2">
                <div class="chart-header">
                    <div class="chart-title">
                        <span class="neon-text-purple">‚≠ê</span> <span data-en="Department Performance" data-ar="ÿ£ÿØÿßÿ° ÿßŸÑÿ£ŸÇÿ≥ÿßŸÖ">Department Performance</span>
                    </div>
                </div>
                <div class="star-grid" id="b-star-grid" style="display: flex; justify-content: space-around; align-items: center; height: 200px;">
                    <!-- Dynamic Content -->
                </div>
            </div>

            <!-- KPI Management Table (Full Width) -->
            <div class="chart-card grid-col-4">
                <div class="chart-header">
                    <div class="chart-title">
                        <span class="neon-text-purple">üìã</span> <span data-en="Detailed Management KPIs" data-ar="ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ£ÿØÿßÿ° ÿßŸÑÿ•ÿØÿßÿ±Ÿäÿ© ÿßŸÑÿ™ŸÅÿµŸäŸÑŸäÿ©">Detailed Management KPIs</span>
                    </div>
                </div>
                <table class="modern-table" id="b-kpi-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th data-en="KPI" data-ar="ŸÖÿ§ÿ¥ÿ± ÿßŸÑÿ£ÿØÿßÿ°">KPI</th>
                            <th data-en="Measurement" data-ar="ÿ¢ŸÑŸäÿ© ÿßŸÑŸÇŸäÿßÿ≥">Measurement</th>
                            <th data-en="Target" data-ar="ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅ">Target</th>
                            <th data-en="Achieved" data-ar="ÿßŸÑŸÖÿ≠ŸÇŸÇ">Achieved</th>
                            <th data-en="Progress" data-ar="ÿßŸÑÿ™ŸÇÿØŸÖ">Progress</th>
                            <th data-en="Status" data-ar="ÿßŸÑÿ≠ÿßŸÑÿ©">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dynamic Content -->
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <!-- Violation Details Modal -->
    <div id="violation-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <div id="modal-icon" class="modal-icon-large"></div>
                <h2 id="modal-title">Violation Details</h2>
            </div>
            <div id="modal-body">
                <!-- Details will be injected here -->
            </div>
        </div>
    </div>

    <!-- ================= FOOTER ================= --> 

</body>
</html>
