<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Violations - Olayan Compliance</title>
    <link rel="stylesheet" href="style-base.css">
    <link rel="stylesheet" href="style-home.css">
    <link rel="stylesheet" href="style-violations.css">
    <link rel="icon" type="image/svg+xml" href="olayan-mark.svg">
    <link rel="apple-touch-icon" href="olayan-logo.png">
    <link rel="mask-icon" href="olayan-mark.svg" color="#2d6cdf">
    <meta name="theme-color" content="#0b0e2b">
    <script src="app.js?v=4" defer></script>
    <script src="od_config.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@azure/msal-browser@2.37.0/dist/msal-browser.min.js" defer></script>
    <script src="onedrive_activity.js" defer></script>
    <script src="github_activity.js" defer></script>
</head>
<body class="en">
  <header class="main-header">
    <div class="header-left">
        <img src="olayan-logo.png" alt="Olayan Logo" class="logo">
        <div class="company-text">
            <h1 data-en="Olayan Food Services" data-ar="Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù„ÙŠØ§Ù† Ù„Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©">Olayan Food Services</h1>
            <p data-en="Excellence in Service" data-ar="Ø§Ù„ØªÙ…ÙŠØ² ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©">Excellence in Service</p>
        </div>
    </div>
    
    <!-- Right Side: Navigation & Lang Switch -->
    <div class="header-right"> 
      <!-- Desktop Nav (Visible on Desktop via CSS) -->
      <nav class="main-nav"> 
        <button class="nav-btn" onclick="location.href='index.html'" data-en="Home" data-ar="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">Home</button> 
        <button class="nav-btn active" onclick="location.href='violations.html'" data-en="Violations" data-ar="Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª">Violations</button> 
        <button class="nav-btn" onclick="location.href='training.html'" data-en="Training" data-ar="Ø§Ù„ØªØ¯Ø±ÙŠØ¨">Training</button> 
        <button class="nav-btn" onclick="location.href='branches.html'" data-en="Branches" data-ar="Ø§Ù„ÙØ±ÙˆØ¹">Branches</button> 
        <button class="nav-btn" onclick="location.href='board.html'" data-en="Board Report" data-ar="ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">Board Report</button>
        <button class="nav-btn" onclick="location.href='login.html'" data-en="Login" data-ar="Ø¯Ø®ÙˆÙ„">Login</button>
        <button class="nav-btn" onclick="location.href='admin.html'" data-en="Admin" data-ar="Ø¥Ø¯Ø§Ø±Ø©">Admin</button>
      </nav> 
      <div class="lang-switch">
         <button class="lang-btn" onclick="setLang('ar')">AR</button>
         <button class="lang-btn" onclick="setLang('en')">EN</button>
     </div>
     
     <!-- Hamburger Button (Visible on Mobile via CSS) -->
     <button class="hamburger-btn" onclick="toggleMenu()">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    </button>
    </div>
  </header>

    <!-- Sliding Side Menu -->
    <div class="side-menu-overlay" id="sideMenuOverlay" onclick="toggleMenu()"></div>
    <aside class="side-menu" id="sideMenu">
        <div class="side-menu-header">
            <img src="olayan-logo.png" class="side-menu-logo" alt="Logo">
            <button class="close-menu-btn" onclick="toggleMenu()">&times;</button>
        </div>
        <nav class="side-menu-nav">
            <a href="index.html" class="side-link">
                <i>ğŸ </i> <span data-en="Home" data-ar="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">Home</span>
            </a>
            <a href="violations.html" class="side-link active">
                <i>âš ï¸</i> <span data-en="Violations" data-ar="Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª">Violations</span>
            </a>
            <a href="training.html" class="side-link">
                <i>ğŸ“</i> <span data-en="Training" data-ar="Ø§Ù„ØªØ¯Ø±ÙŠØ¨">Training</span>
            </a>
            <a href="branches.html" class="side-link">
            <i>ğŸ¬</i> <span data-en="Branches" data-ar="Ø§Ù„ÙØ±ÙˆØ¹">Branches</span>
        </a>
        <a href="board.html" class="side-link">
            <i>ğŸ“Š</i> <span data-en="Management Report" data-ar="ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">Management Report</span>
        </a>
        <a href="login.html" class="side-link">
            <i>ğŸ‘¤</i> <span data-en="Employee Login" data-ar="Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†">Employee Login</span>
        </a>
        <a href="admin.html" class="side-link" id="admin-link">
            <i>ğŸ› ï¸</i> <span data-en="Admin" data-ar="Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†">Admin</span>
        </a>

        </nav>
        <div style="margin-top: auto; padding-top: 20px;">
            <div class="lang-switch" style="display: flex; gap: 10px; justify-content: center;"> 
                <button class="lang-btn" onclick="setLang('ar')" style="flex:1;">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button> 
                <button class="lang-btn" onclick="setLang('en')" style="flex:1;">English</button> 
            </div>
            <div class="sidebar-footer" style="margin-top: 20px; text-align: center; font-size: 0.7rem; color: #64748b; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 10px;">
                <div style="margin-bottom: 5px;">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø¯Ù‰ Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù„ÙŠØ§Ù† Ù„Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Â© 2025</div>
                <div style="direction: ltr;">Developed by Bandar A. Abdulwahab</div>
            </div>
        </div>
    </aside>

    <!-- Services Dashboard Modal (Full Screen) -->
    <div id="services-modal" class="services-modal">
        <div class="services-modal-content">
            <div class="services-header">
                <h2 data-en="Services Dashboard" data-ar="Ù„ÙˆØ­Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª">Services Dashboard</h2>
                <button class="close-services-btn" onclick="toggleServicesDashboard()">&times;</button>
            </div>
            
            <div class="toolbar">
                <button class="toolbar-btn btn-print" onclick="printServices()">
                    <span data-en="Print" data-ar="Ø·Ø¨Ø§Ø¹Ø©">Print</span> ğŸ–¨
                </button>
                <button class="toolbar-btn btn-rate" onclick="window.open('https://forms.gle/1z5jwhtF7LLqWvbQ9', '_blank')" style="background: rgba(155, 89, 182, 0.2); border: 1px solid rgba(155, 89, 182, 0.3); color: #9b59b6;"><span data-en="Rate Us" data-ar="Ù‚ÙŠÙ…Ù†Ø§">Rate Us</span> </button><button class="toolbar-btn btn-export" onclick="exportServicesExcel()">
                    <span data-en="Export Excel" data-ar="ØªØµØ¯ÙŠØ± Excel">Export Excel</span> ğŸ“Š
                </button>
            </div>

            <div class="kpi-grid">
                 <div class="kpi-card">
                    <span class="kpi-title" data-en="Active Requests" data-ar="Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©">Active Requests</span>
                    <h3>142</h3>
                 </div>
                 <div class="kpi-card">
                    <span class="kpi-title" data-en="Completed Today" data-ar="Ø£Ù†Ø¬Ø²Øª Ø§Ù„ÙŠÙˆÙ…">Completed Today</span>
                    <h3>28</h3>
                 </div>
                 <div class="kpi-card">
                    <span class="kpi-title" data-en="Avg Response Time" data-ar="Ù…ØªÙˆØ³Ø· Ø²Ù…Ù† Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©">Avg Response Time</span>
                    <h3>2.4h</h3>
                 </div>
                 <div class="kpi-card">
                    <span class="kpi-title" data-en="Employee Satisfaction" data-ar="Ø±Ø¶Ø§ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†">Employee Satisfaction</span>
                    <h3>98%</h3>
                 </div>
            </div>

            <div class="services-table-container">
                <table id="servicesTable" class="services-table">
                    <thead>
                        <tr>
                            <th data-en="ID" data-ar="Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨">ID</th>
                            <th data-en="Service Type" data-ar="Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©">Service Type</th>
                            <th data-en="Status" data-ar="Ø§Ù„Ø­Ø§Ù„Ø©">Status</th>
                            <th data-en="Priority" data-ar="Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©">Priority</th>
                            <th data-en="Date" data-ar="Ø§Ù„ØªØ§Ø±ÙŠØ®">Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>#REQ-001</td><td>Maintenance</td><td>In Progress</td><td>High</td><td>2025-01-10</td></tr>
                        <tr><td>#REQ-002</td><td>IT Support</td><td>Pending</td><td>Medium</td><td>2025-01-11</td></tr>
                        <tr><td>#REQ-003</td><td>Logistics</td><td>Completed</td><td>Low</td><td>2025-01-09</td></tr>
                        <tr><td>#REQ-004</td><td>HR Request</td><td>Completed</td><td>High</td><td>2025-01-08</td></tr>
                        <tr><td>#REQ-005</td><td>Cleaning</td><td>In Progress</td><td>Medium</td><td>2025-01-12</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="header-spacer"></div>

    <div class="violations-header">
        <h1 data-en="Violations Management" data-ar="Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª">Violations Management</h1>
    </div>

    <div class="kpi-section">
        <!-- Summary Cards -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <span class="kpi-title" data-en="Total Violations" data-ar="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª">Total Violations</span>
                <h3 id="v-total-count">Loading...</h3>
            </div>
            <div class="kpi-card">
                <span class="kpi-title" data-en="Total Amount (SAR)" data-ar="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº (Ø±ÙŠØ§Ù„)">Total Amount (SAR)</span>
                <h3 id="v-total-amount">Loading...</h3>
            </div>
            <div class="kpi-card">
                <span class="kpi-title" data-en="Most Frequent Branch" data-ar="Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£ÙƒØ«Ø± ØªÙƒØ±Ø§Ø±Ø§Ù‹">Most Frequent Branch</span>
                <h3 id="v-top-freq-branch" style="font-size: 1.5rem;">Loading...</h3>
            </div>
            <div class="kpi-card">
                <span class="kpi-title" data-en="Highest Risk Branch" data-ar="Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø®Ø·ÙˆØ±Ø©">Highest Risk Branch</span>
                <h3 id="v-top-risk-branch" style="font-size: 1.5rem;">Loading...</h3>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-container">
            <!-- Top 15 Frequency -->
            <div class="chart-card">
                <h3 data-en="Branches â€“ Repeat Violations" data-ar="Ø§Ù„ÙØ±ÙˆØ¹ â€“ ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª">Branches â€“ Repeat Violations</h3>
                <div id="chart-freq" class="bar-chart"></div>
            </div>

            <!-- Regional Analysis -->
            <div class="chart-card">
                <h3 data-en="Violations by Region" data-ar="Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©">Violations by Region</h3>
                <div id="chart-region" class="bar-chart"></div>
            </div>

            <!-- Top 15 Risk -->
            <div class="chart-card">
                <h3 data-en="Branches â€“ Highest Risk (Amount)" data-ar="Ø§Ù„ÙØ±ÙˆØ¹ â€“ Ø£Ø¹Ù„Ù‰ Ø®Ø·ÙˆØ±Ø© (Ø§Ù„Ù…Ø¨Ù„Øº)">Branches â€“ Highest Risk (Amount)</h3>
                <div id="chart-risk" class="bar-chart"></div>
            </div>
        </div>
        
        <!-- Violation Types List -->
         <div class="chart-card" style="margin-top: 30px;">
            <h3 data-en="Most Common Violation Types" data-ar="Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ø´ÙŠÙˆØ¹Ø§Ù‹">Most Common Violation Types</h3>
            <div id="list-types" class="types-list"></div>
        </div>

    </div>

    <!-- Violation Details Modal -->
    <div id="violation-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <div id="modal-icon" class="modal-icon-large"></div>
                <h2 id="modal-title">Violation Details</h2>
            </div>
            <div id="modal-body">
                <!-- Details will be injected here -->
            </div>
        </div>
    </div>


    <!-- ================= FOOTER ================= --> 
    <footer class="main-footer"> 
        <span data-ar="Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø¯Ù‰ Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù„ÙŠØ§Ù† Ù„Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Â© 2025" 
                data-en="All rights reserved â€“ Olayan Food Services Company Â© 2025"> 
            Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø¯Ù‰ Ø´Ø±ÙƒØ© Ø§Ù„Ø¹Ù„ÙŠØ§Ù† Ù„Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Â© 2025 
        </span> 
        <br> 
        Developed by <strong>Bandar A. Abdulwahab</strong> 
    </footer>
</body>
</html>
