<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Violations - Olayan Compliance</title>
    <link rel="stylesheet" href="style-base.css">
    <link rel="stylesheet" href="style-home.css">
    <link rel="stylesheet" href="style-violations.css">
    <link rel="icon" type="image/svg+xml" href="olayan-mark.svg">
    <link rel="apple-touch-icon" href="olayan-logo.png">
    <link rel="mask-icon" href="olayan-mark.svg" color="#2d6cdf">
    <meta name="theme-color" content="#0b0e2b">
    <script src="app.js?v=4" defer></script>
    <script src="od_config.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@azure/msal-browser@2.37.0/dist/msal-browser.min.js" defer></script>
    <script src="onedrive_activity.js" defer></script>
    <script src="github_activity.js" defer></script>
</head>
<body class="en">
  <div class="brand-bar">
    <img src="olayan-logo.png" alt="Olayan">
    <span class="brand-name">Olayan Compliance Dashboard</span>
    <span class="brand-info" id="file-activity"></span>
  </div>

    <!-- Hamburger Button -->
    <button class="hamburger-btn" onclick="toggleMenu()">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    </button>

    <!-- Sliding Side Menu -->
    <div class="side-menu-overlay" id="sideMenuOverlay" onclick="toggleMenu()"></div>
    <aside class="side-menu" id="sideMenu">
        <div class="side-menu-header">
            <img src="olayan-logo.png" class="side-menu-logo" alt="Logo">
            <button class="close-menu-btn" onclick="toggleMenu()">&times;</button>
        </div>
        <nav class="side-menu-nav">
            <a href="index.html" class="side-link">
                <i>üè†</i> <span data-en="Home" data-ar="ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©">Home</span>
            </a>
            <a href="violations.html" class="side-link active">
                <i>‚ö†Ô∏è</i> <span data-en="Violations" data-ar="ÿßŸÑŸÖÿÆÿßŸÑŸÅÿßÿ™">Violations</span>
            </a>
            <a href="training.html" class="side-link">
                <i>üéì</i> <span data-en="Training" data-ar="ÿßŸÑÿ™ÿØÿ±Ÿäÿ®">Training</span>
            </a>
            <a href="branches.html" class="side-link">
            <i>üè¨</i> <span data-en="Branches" data-ar="ÿßŸÑŸÅÿ±Ÿàÿπ">Branches</span>
        </a>
        <a href="board.html" class="side-link">
            <i>üìä</i> <span data-en="Management Report" data-ar="ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ•ÿØÿßÿ±ÿ©">Management Report</span>
        </a>
        <a href="login.html" class="side-link">
            <i>üîê</i> <span data-en="Login" data-ar="ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ">Login</span>
        </a>

        </nav>
        <div style="margin-top: auto; padding-top: 20px;">
            <div class="lang-switch" style="display: flex; gap: 10px; justify-content: center;"> 
                <button class="lang-btn" onclick="setLang('ar')" style="flex:1;">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button> 
                <button class="lang-btn" onclick="setLang('en')" style="flex:1;">English</button> 
            </div>
        </div>
    </aside>

    <!-- Services Dashboard Modal (Full Screen) -->
    <div id="services-modal" class="services-modal">
        <div class="services-modal-content">
            <div class="services-header">
                <h2 data-en="Services Dashboard" data-ar="ŸÑŸàÿ≠ÿ© ÿßŸÑÿÆÿØŸÖÿßÿ™">Services Dashboard</h2>
                <button class="close-services-btn" onclick="toggleServicesDashboard()">&times;</button>
            </div>
            
            <div class="toolbar">
                <button class="toolbar-btn btn-print" onclick="printServices()">
                    <span data-en="Print" data-ar="ÿ∑ÿ®ÿßÿπÿ©">Print</span> üñ®
                </button>
                <button class="toolbar-btn btn-rate" onclick="window.open('https://forms.gle/1z5jwhtF7LLqWvbQ9', '_blank')" style="background: rgba(155, 89, 182, 0.2); border: 1px solid rgba(155, 89, 182, 0.3); color: #9b59b6;"><span data-en="Rate Us" data-ar="ŸÇŸäŸÖŸÜÿß">Rate Us</span> </button><button class="toolbar-btn btn-export" onclick="exportServicesExcel()">
                    <span data-en="Export Excel" data-ar="ÿ™ÿµÿØŸäÿ± Excel">Export Excel</span> üìä
                </button>
            </div>

            <div class="kpi-grid">
                 <div class="kpi-card">
                    <span class="kpi-title" data-en="Active Requests" data-ar="ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÜÿ¥ÿ∑ÿ©">Active Requests</span>
                    <h3>142</h3>
                 </div>
                 <div class="kpi-card">
                    <span class="kpi-title" data-en="Completed Today" data-ar="ÿ£ŸÜÿ¨ÿ≤ÿ™ ÿßŸÑŸäŸàŸÖ">Completed Today</span>
                    <h3>28</h3>
                 </div>
                 <div class="kpi-card">
                    <span class="kpi-title" data-en="Avg Response Time" data-ar="ŸÖÿ™Ÿàÿ≥ÿ∑ ÿ≤ŸÖŸÜ ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ©">Avg Response Time</span>
                    <h3>2.4h</h3>
                 </div>
                 <div class="kpi-card">
                    <span class="kpi-title" data-en="Employee Satisfaction" data-ar="ÿ±ÿ∂ÿß ÿßŸÑŸÖŸàÿ∏ŸÅŸäŸÜ">Employee Satisfaction</span>
                    <h3>98%</h3>
                 </div>
            </div>

            <div class="services-table-container">
                <table id="servicesTable" class="services-table">
                    <thead>
                        <tr>
                            <th data-en="ID" data-ar="ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®">ID</th>
                            <th data-en="Service Type" data-ar="ŸÜŸàÿπ ÿßŸÑÿÆÿØŸÖÿ©">Service Type</th>
                            <th data-en="Status" data-ar="ÿßŸÑÿ≠ÿßŸÑÿ©">Status</th>
                            <th data-en="Priority" data-ar="ÿßŸÑÿ£ŸàŸÑŸàŸäÿ©">Priority</th>
                            <th data-en="Date" data-ar="ÿßŸÑÿ™ÿßÿ±ŸäÿÆ">Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>#REQ-001</td><td>Maintenance</td><td>In Progress</td><td>High</td><td>2025-01-10</td></tr>
                        <tr><td>#REQ-002</td><td>IT Support</td><td>Pending</td><td>Medium</td><td>2025-01-11</td></tr>
                        <tr><td>#REQ-003</td><td>Logistics</td><td>Completed</td><td>Low</td><td>2025-01-09</td></tr>
                        <tr><td>#REQ-004</td><td>HR Request</td><td>Completed</td><td>High</td><td>2025-01-08</td></tr>
                        <tr><td>#REQ-005</td><td>Cleaning</td><td>In Progress</td><td>Medium</td><td>2025-01-12</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <header class="main-header">
        <div class="header-left" style="display: flex; align-items: center;">
            <img src="olayan-logo.png" class="logo" alt="Olayan Logo">
            <div class="company-text">
                <h1 data-en="Olayan Food Division" data-ar="ÿ¥ÿ±ŸÉÿ© ÿßŸÑÿπŸÑŸäÿßŸÜ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ©">Olayan Food Division</h1>
                <p data-en="Burger King ¬∑ Texas Chicken ¬∑ Buffalo Wild Wings" data-ar="ÿ®ÿ±ÿ¨ÿ± ŸÉŸÜÿ¨ ¬∑ ÿØÿ¨ÿßÿ¨ ÿ™ŸÉÿ≥ÿßÿ≥ ¬∑ ÿ®ÿßŸÅŸÑŸà ŸàÿßŸäŸÑÿØ ŸàŸäŸÜÿ¨ÿ≤">Burger King ¬∑ Texas Chicken ¬∑ Buffalo Wild Wings</p>
            </div>
        </div>
        <div class="header-right">
            <nav class="main-nav" style="display: none;"> 
      <button class="nav-btn" onclick="location.href='index.html'" data-en="Home" data-ar="ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©">Home</button> 
      <button class="nav-btn active" onclick="location.href='violations.html'" data-en="Violations" data-ar="ÿßŸÑŸÖÿÆÿßŸÑŸÅÿßÿ™">Violations</button> 
      <button class="nav-btn" onclick="location.href='training.html'" data-en="Training" data-ar="ÿßŸÑÿ™ÿØÿ±Ÿäÿ®">Training</button> 
      <button class="nav-btn" onclick="location.href='branches.html'" data-en="Branches" data-ar="ÿßŸÑŸÅÿ±Ÿàÿπ">Branches</button> 
      <button class="nav-btn" onclick="location.href='board.html'" data-en="Board Report" data-ar="ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ•ÿØÿßÿ±ÿ©">Board Report</button> 
    </nav>
            <div class="lang-switch">
                <button class="lang-btn" onclick="setLang('ar')">AR</button>
                <button class="lang-btn" onclick="setLang('en')">EN</button>
            </div>
        </div>
    </header>
    <div class="header-spacer"></div>

    <div class="violations-header">
        <h1 data-en="Violations Management" data-ar="ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿÆÿßŸÑŸÅÿßÿ™">Violations Management</h1>
    </div>

    <div class="kpi-section">
        <!-- Summary Cards -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <span class="kpi-title" data-en="Total Violations" data-ar="ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿÆÿßŸÑŸÅÿßÿ™">Total Violations</span>
                <h3 id="v-total-count">Loading...</h3>
            </div>
            <div class="kpi-card">
                <span class="kpi-title" data-en="Total Amount (SAR)" data-ar="ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ (ÿ±ŸäÿßŸÑ)">Total Amount (SAR)</span>
                <h3 id="v-total-amount">Loading...</h3>
            </div>
            <div class="kpi-card">
                <span class="kpi-title" data-en="Most Frequent Branch" data-ar="ÿßŸÑŸÅÿ±ÿπ ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ™ŸÉÿ±ÿßÿ±ÿßŸã">Most Frequent Branch</span>
                <h3 id="v-top-freq-branch" style="font-size: 1.5rem;">Loading...</h3>
            </div>
            <div class="kpi-card">
                <span class="kpi-title" data-en="Highest Risk Branch" data-ar="ÿßŸÑŸÅÿ±ÿπ ÿßŸÑÿ£ÿπŸÑŸâ ÿÆÿ∑Ÿàÿ±ÿ©">Highest Risk Branch</span>
                <h3 id="v-top-risk-branch" style="font-size: 1.5rem;">Loading...</h3>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-container">
            <!-- Top 15 Frequency -->
            <div class="chart-card">
                <h3 data-en="Branches ‚Äì Repeat Violations" data-ar="ÿßŸÑŸÅÿ±Ÿàÿπ ‚Äì ÿ™ŸÉÿ±ÿßÿ± ÿßŸÑŸÖÿÆÿßŸÑŸÅÿßÿ™">Branches ‚Äì Repeat Violations</h3>
                <div id="chart-freq" class="bar-chart"></div>
            </div>

            <!-- Regional Analysis -->
            <div class="chart-card">
                <h3 data-en="Violations by Region" data-ar="ÿßŸÑŸÖÿÆÿßŸÑŸÅÿßÿ™ ÿ≠ÿ≥ÿ® ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©">Violations by Region</h3>
                <div id="chart-region" class="bar-chart"></div>
            </div>

            <!-- Top 15 Risk -->
            <div class="chart-card">
                <h3 data-en="Branches ‚Äì Highest Risk (Amount)" data-ar="ÿßŸÑŸÅÿ±Ÿàÿπ ‚Äì ÿ£ÿπŸÑŸâ ÿÆÿ∑Ÿàÿ±ÿ© (ÿßŸÑŸÖÿ®ŸÑÿ∫)">Branches ‚Äì Highest Risk (Amount)</h3>
                <div id="chart-risk" class="bar-chart"></div>
            </div>
        </div>
        
        <!-- Violation Types List -->
         <div class="chart-card" style="margin-top: 30px;">
            <h3 data-en="Most Common Violation Types" data-ar="ÿ£ŸÜŸàÿßÿπ ÿßŸÑŸÖÿÆÿßŸÑŸÅÿßÿ™ ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ¥ŸäŸàÿπÿßŸã">Most Common Violation Types</h3>
            <div id="list-types" class="types-list"></div>
        </div>

    </div>

    <!-- Violation Details Modal -->
    <div id="violation-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <div id="modal-icon" class="modal-icon-large"></div>
                <h2 id="modal-title">Violation Details</h2>
            </div>
            <div id="modal-body">
                <!-- Details will be injected here -->
            </div>
        </div>
    </div>


    <!-- ================= FOOTER ================= --> 
    <footer class="main-footer"> 
        <span data-ar="ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ© ŸÑÿØŸâ ÿ¥ÿ±ŸÉÿ© ÿßŸÑÿπŸÑŸäÿßŸÜ ŸÑŸÑÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ¬© 2025" 
                data-en="All rights reserved ‚Äì Olayan Food Services Company ¬© 2025"> 
            ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ© ŸÑÿØŸâ ÿ¥ÿ±ŸÉÿ© ÿßŸÑÿπŸÑŸäÿßŸÜ ŸÑŸÑÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ∫ÿ∞ÿßÿ¶Ÿäÿ© ¬© 2025 
        </span> 
        <br> 
        Developed by <strong>Bandar A. Abdulwahab</strong> 
    </footer>
</body>
</html>
