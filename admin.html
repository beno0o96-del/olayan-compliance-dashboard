<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุชุญูู ุงููุธุงู | Olayan Admin</title>
    <link rel="stylesheet" href="style-admin.css">
    <link rel="icon" type="image/svg+xml" href="olayan-mark.svg">
    <script src="admin.js" defer></script>
    <!-- app.js is needed for data fetching logic if we want to sync with board data -->
    <script src="app.js?v=5" defer></script>
</head>
<body class="admin-body ar">

    <!-- LOGIN SCREEN -->
    <div id="login-section" class="login-wrapper">
        <div class="login-box">
            <img src="olayan-logo.png" alt="Olayan Logo" style="height: 60px; margin-bottom: 20px;">
            <h2 id="login-title">Admin Login</h2>
            
            <div class="form-group text-right">
                <label id="lbl-user" for="username">Username</label>
                <input type="text" id="username" class="form-control" placeholder="Enter Username">
            </div>
            <div class="form-group text-right">
                <label id="lbl-pass" for="pin">Password</label>
                <input type="password" id="pin" class="form-control" placeholder="Enter Password">
            </div>
            
            <button id="login" class="btn btn-primary" style="width: 100%; justify-content: center;">Sign In</button>
            
            <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: center;">
                <button id="setup" class="btn btn-secondary" style="font-size: 0.8rem; border-radius: 20px; padding: 5px 15px;">Setup (First Time)</button>
            </div>
            
            <a href="#" class="forgot-pass" onclick="alert('Please contact IT Department')" style="display: block; margin-top: 20px; color: #64748b; text-decoration: none; font-size: 0.9rem;">Forgot Password?</a>

            <p id="msg" style="margin-top: 20px; color: #ff6b6b; font-size: 0.9rem;"></p>

            <div class="lang-switch" style="margin-top: 30px; display: flex; justify-content: center; gap: 15px;">
                <button class="btn btn-secondary" id="login-lang-en" style="border-radius: 15px; padding: 5px 15px;">English</button>
                <button class="btn btn-secondary" id="login-lang-ar" style="border-radius: 15px; padding: 5px 15px;">ุงูุนุฑุจูุฉ</button>
           </div>
        </div>
    </div>

    <!-- ADMIN DASHBOARD -->
    <div id="admin-content" class="admin-layout" style="display: none; width: 100%;">
        <div class="sidebar-overlay" onclick="toggleAdminSidebar()"></div>
        
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <img src="olayan-logo.png" class="sidebar-logo" alt="Logo">
                <span class="sidebar-brand">ููุญุฉ ุงูุชุญูู</span>
            </div>
            <nav class="sidebar-nav">
                <a href="#" onclick="showSection('dashboard')" class="nav-item active" id="nav-dashboard">
                    <i>๐</i> ุงูุฑุฆูุณูุฉ
                </a>
                <a href="#" onclick="showSection('employees')" class="nav-item" id="nav-employees">
                    <i>๐ฅ</i> ุงูููุธููู
                </a>
                <a href="#" onclick="showSection('media')" class="nav-item" id="nav-media">
                    <i>๐ผ๏ธ</i> ูุณุงุฆุท
                </a>
                <a href="#" onclick="showSection('pages')" class="nav-item" id="nav-pages">
                    <i>๐</i> ุตูุญุงุช
                </a>
                <a href="#" onclick="showSection('comments')" class="nav-item" id="nav-comments">
                    <i>๐ฌ</i> ุชุนูููุงุช
                </a>
                <a href="#" onclick="showSection('appearance')" class="nav-item" id="nav-appearance">
                    <i>๐จ</i> ูุธูุฑ
                </a>
                <a href="#" onclick="showSection('plugins')" class="nav-item" id="nav-plugins">
                    <i>๐งฉ</i> ุฅุถุงูุงุช
                </a>
                <a href="#" onclick="showSection('users')" class="nav-item" id="nav-users">
                    <i>๐ค</i> ุฃุนุถุงุก
                </a>
                <a href="#" onclick="showSection('tools')" class="nav-item" id="nav-tools">
                    <i>๐๏ธ</i> ุฃุฏูุงุช
                </a>
                <a href="#" onclick="showSection('settings')" class="nav-item" id="nav-settings">
                    <i>โ๏ธ</i> ุงูุฅุนุฏุงุฏุงุช
                </a>
                <a href="#" onclick="showSection('email')" class="nav-item" id="nav-email">
                    <i>โ๏ธ</i> ุงูููู
                </a>
                <a href="#" onclick="showSection('branches')" class="nav-item" id="nav-branches">
                    <i>๐ฌ</i> ูุฑูุน
                </a>
                <a href="tasks.html" target="_blank" class="nav-item" id="nav-tasks">
                    <i>โ</i> ููุงู
                </a>
                <a href="#" onclick="showSection('services')" class="nav-item" id="nav-services">
                    <i>๐ฉ</i> ุงูุดูุงูู ูุงูุทูุจุงุช
                </a>
                <div style="border-top: 1px solid #eee; margin: 10px 20px;"></div>
                <a href="board.html" target="_blank" class="nav-item">
                    <i>๐</i> ุงูุฐูุงุจ ูููููุน
                </a>
            </nav>
            <div style="padding: 20px;">
                <button id="logout" class="btn btn-danger" style="width: 100%; justify-content: center;">ุชุณุฌูู ุฎุฑูุฌ</button>
            </div>
            <div class="sidebar-footer" style="padding: 10px 20px; text-align: center; font-size: 0.7rem; color: #64748b; border-top: 1px solid #eee;">
                <div style="margin-bottom: 5px;">ุฌููุน ุงูุญููู ูุญููุธุฉ ูุฏู ุดุฑูุฉ ุงูุนููุงู ููุฎุฏูุงุช ุงูุบุฐุงุฆูุฉ ยฉ 2025</div>
                <div style="direction: ltr;">Developed by Bandar A. Abdulwahab</div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <header class="admin-header">
                <button id="sidebar-toggle" class="btn btn-secondary" style="margin-inline-end: 10px; display: none;">โฐ</button>
                <div class="header-title" id="page-title">ููุฎุต ุงููุธุงู</div>
                <div class="header-actions">
                    <div style="display:flex; gap:8px; align-items:center; position:relative;">
                        <button class="btn btn-secondary" id="btn-lang-ar">ุงูุนุฑุจูุฉ</button>
                        <button class="btn btn-secondary" id="btn-lang-en">English</button>
                        <span id="merge-mode-indicator" style="margin-inline-start:8px; padding:4px 10px; border-radius:12px; border:1px solid #4facfe; color:#4facfe; font-size:0.85rem;">ูุถุน ุงูุฏูุฌ: ุชุญุฏูุซ ููุท</span>
                        <span id="update-source-indicator" style="margin-inline-start:8px; padding:4px 10px; border-radius:12px; border:1px solid #a78bfa; color:#a78bfa; font-size:0.85rem;">ุขุฎุฑ ุชุญุฏูุซ: Excel</span>
                        <button class="btn btn-secondary" id="btn-control-menu" style="margin-inline-start:8px;">ุชุญูู ุงูุจูุงูุงุช โ</button>
                        <div id="control-menu" style="position:absolute; top:100%; inset-inline-end:0; background:#fff; border:1px solid #ddd; border-radius:10px; padding:10px; box-shadow:0 10px 25px rgba(0,0,0,0.15); width: min(900px, 90vw); overflow:hidden; height:0; transition: height 250ms ease;">
                            <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                                <button class="btn btn-secondary" onclick="importEmployeesFromJSON()">ุงุณุชูุฑุงุฏ ุงูููุธููู (JSON ุฎุงุฑุฌู)</button>
                                <button class="btn btn-primary" onclick="publishEmployeesJSON()">ุญูุธ ุงูููุธููู (JSON ุฎุงุฑุฌู)</button>
                                <input type="file" id="emp-json-file" accept="application/json" style="background:#fff; border:1px solid #ddd; border-radius:6px; padding:6px;">
                                <button class="btn btn-secondary" onclick="importEmployeesFromLocalJSON()">ุงุณุชูุฑุงุฏ JSON ูุญูู</button>
                                <button class="btn btn-primary" onclick="downloadEmployeesJSON()">ุชูุฒูู ุงูููุธููู (JSON)</button>
                                <div id="merge-mode" style="background:#fff; border:1px solid #ddd; border-radius:6px; padding:6px; display:flex; gap:8px; align-items:center;">
                                    <span id="lbl-merge-mode" style="color:#333; font-size:0.9rem;">ูุถุน ุงูุฏูุฌ:</span>
                                    <button class="btn btn-secondary" id="btn-mode-merge">ุชุญุฏูุซ ููุท</button>
                                    <button class="btn btn-secondary" id="btn-mode-replace">ุงุณุชุจุฏุงู ูุงูู</button>
                                </div>
                            </div>
                            <div style="margin-top:8px; color:#555; font-size:0.85rem;">
                                <span class="dev-badge" data-en="Coming soon โ Site under development โข Engineer (Bandar A.Abdullwahab)" data-ar="ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)" style="display:inline-block; background: rgba(79,172,254,0.12); border:1px solid #4facfe; color:#4facfe; padding:6px 10px; border-radius:12px;">ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)</span>
                            </div>
                        </div>
                    </div>
                    <div class="user-profile">
                        <div class="text-right">
                            <div style="font-weight: bold; font-size: 0.9rem;" id="admin-user-name">Bandar A.Abdullwahab</div>
                            <div style="font-size: 0.8rem; color: #777;">ูุณุคูู ุงููุธุงู</div>
                        </div>
                        <div class="user-avatar">B</div>
                    </div>
                </div>
            </header>

            <div class="admin-content-wrapper">
                
                <!-- SECTION: DASHBOARD -->
                <div id="section-dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3 id="stat-users">3</h3>
                                <p>ุงููุณุชุฎุฏููู ุงููุดุทูู</p>
                            </div>
                            <div class="stat-icon">๐ฅ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3 id="stat-complaints">12</h3>
                                <p>ุงูุดูุงูู ุงูุฌุฏูุฏุฉ</p>
                            </div>
                            <div class="stat-icon">๐ฉ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3 id="stat-status" style="color: #4caf50;">98%</h3>
                                <p>ุญุงูุฉ ุงููุธุงู</p>
                            </div>
                            <div class="stat-icon">โ</div>
                        </div>
                    </div>

                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุขุฎุฑ ุงููุดุงุทุงุช</span>
                        </div>
                        <div id="activity-log" style="font-size: 0.9rem; color: #555;">
                            ุฌุงุฑู ุงูุชุญููู...
                        </div>
                    </div>
                </div>

                <!-- SECTION: MEDIA -->
                <div id="section-media" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ูุณุงุฆุท</span>
                        </div>
                        <p class="dev-badge" data-en="Coming soon โ Site under development โข Engineer (Bandar A.Abdullwahab)" data-ar="ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)" style="display:inline-block; background: rgba(79,172,254,0.12); border:1px solid #4facfe; color:#4facfe; padding:6px 10px; border-radius:12px;">ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)</p>
                    </div>
                </div>

                <!-- SECTION: PAGES -->
                <div id="section-pages" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุตูุญุงุช</span>
                            <button class="btn btn-primary">ุตูุญุฉ ุฌุฏูุฏุฉ +</button>
                        </div>
                        <p class="dev-badge" data-en="Coming soon โ Site under development โข Engineer (Bandar A.Abdullwahab)" data-ar="ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)" style="display:inline-block; background: rgba(79,172,254,0.12); border:1px solid #4facfe; color:#4facfe; padding:6px 10px; border-radius:12px;">ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)</p>
                    </div>
                </div>

                <!-- SECTION: BRANCHES -->
                <div id="section-branches" class="d-none">
                    <div class="card-section">
                        <div class="section-header" style="display:flex; justify-content:space-between; align-items:center;">
                            <span class="section-title" id="branches-title">ูุฑูุน</span>
                            <a href="branches.html" target="_blank" class="btn btn-secondary" id="btn-open-branches">ูุชุญ ุตูุญุฉ ุงููุฑูุน โ</a>
                        </div>
                        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
                            <div>
                                <label id="lbl-branch-name" style="display:block; color:#666; font-size:0.85rem;">ุงุณู ุงููุฑุน</label>
                                <input id="br-name" class="form-control" type="text">
                            </div>
                            <div>
                                <label id="lbl-branch-type" style="display:block; color:#666; font-size:0.85rem;">ุงูููุน</label>
                                <select id="br-type" class="form-control">
                                    <option value="basic" id="opt-type-basic">ุฃุณุงุณู</option>
                                    <option value="opening" id="opt-type-opening">ุงูุชุชุงุญ</option>
                                </select>
                            </div>
                            <div>
                                <label id="lbl-branch-brand" style="display:block; color:#666; font-size:0.85rem;">ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ</label>
                                <input id="br-brand" class="form-control" type="text" placeholder="BK / TC / BWW">
                            </div>
                            <div>
                                <label id="lbl-branch-email" style="display:block; color:#666; font-size:0.85rem;">ุงูุงูููู</label>
                                <input id="br-email" class="form-control" type="email">
                            </div>
                            <div>
                                <label id="lbl-branch-cost" style="display:block; color:#666; font-size:0.85rem;">Cost Center</label>
                                <input id="br-cost" class="form-control" type="text">
                            </div>
                            <div>
                                <label id="lbl-branch-ops" style="display:block; color:#666; font-size:0.85rem;">OPS1</label>
                                <input id="br-ops" class="form-control" type="text">
                            </div>
                            <div>
                                <label id="lbl-branch-logo" style="display:block; color:#666; font-size:0.85rem;">ุดุนุงุฑ ุงูุนูุงูุฉ</label>
                                <input id="br-logo" class="form-control" type="file" accept="image/*">
                            </div>
                            <div>
                                <label id="lbl-branch-kpi-target" style="display:block; color:#666; font-size:0.85rem;">ูุฏู KPI</label>
                                <input id="br-kpi-target" class="form-control" type="number" step="0.01">
                            </div>
                            <div>
                                <label id="lbl-branch-kpi-value" style="display:block; color:#666; font-size:0.85rem;">ูููุฉ KPI</label>
                                <input id="br-kpi-value" class="form-control" type="number" step="0.01">
                            </div>
                        </div>
                        <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
                            <button class="btn btn-primary" id="btn-branch-save">ุญูุธ ุงููุฑุน</button>
                            <button class="btn btn-secondary" id="btn-branch-new">ูุฑุน ุฌุฏูุฏ</button>
                            <button class="btn btn-secondary" id="btn-branch-export">ุชุตุฏูุฑ JSON</button>
                            <input type="file" id="br-json-file" accept="application/json" style="display:none;">
                            <button class="btn btn-secondary" id="btn-branch-import">ุงุณุชูุฑุงุฏ JSON</button>
                            <button class="btn btn-secondary" id="btn-branch-import-text">ุงุณุชูุฑุงุฏ ูู ูุต</button>
                        </div>
                        <div style="margin-top:8px;">
                            <label style="display:block; color:#666; font-size:0.85rem;">ูุตู ูุงุฆูุฉ (ุงูุงุณู TAB ูุฑูุฒ ุงูุชูููุฉ TAB ุงูุงูููู)</label>
                            <textarea id="br-bulk-text" class="form-control" rows="4" placeholder="ุงูุงุณู\t6120... - BK - ูุฑุน\tbk.example@olayanfood.com"></textarea>
                        </div>
                        <div style="margin-top:16px; overflow:auto;">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ุงุณู ุงููุฑุน</th>
                                        <th>ุงูููุน</th>
                                        <th>ุงูุนูุงูุฉ</th>
                                        <th>ุงูุงูููู</th>
                                        <th>Cost Center</th>
                                        <th>OPS1</th>
                                        <th>KPI%</th>
                                        <th>ุงูุดุนุงุฑ</th>
                                        <th>ุฅุฌุฑุงุกุงุช</th>
                                    </tr>
                                </thead>
                                <tbody id="branches-table-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- SECTION: COMMENTS -->
                <div id="section-comments" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุชุนูููุงุช</span>
                        </div>
                        <p class="dev-badge" data-en="Coming soon โ Site under development โข Engineer (Bandar A.Abdullwahab)" data-ar="ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)" style="display:inline-block; background: rgba(79,172,254,0.12); border:1px solid #4facfe; color:#4facfe; padding:6px 10px; border-radius:12px;">ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)</p>
                    </div>
                </div>

                <!-- SECTION: APPEARANCE -->
                <div id="section-appearance" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ูุธูุฑ</span>
                        </div>
                        <p class="dev-badge" data-en="Coming soon โ Site under development โข Engineer (Bandar A.Abdullwahab)" data-ar="ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)" style="display:inline-block; background: rgba(79,172,254,0.12); border:1px solid #4facfe; color:#4facfe; padding:6px 10px; border-radius:12px;">ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)</p>
                    </div>
                </div>

                <!-- SECTION: PLUGINS -->
                <div id="section-plugins" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุฅุถุงูุงุช</span>
                            <button class="btn btn-primary">ุฅุถุงูุฉ ุฌุฏูุฏุฉ +</button>
                        </div>
                        <p class="dev-badge" data-en="Coming soon โ Site under development โข Engineer (Bandar A.Abdullwahab)" data-ar="ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)" style="display:inline-block; background: rgba(79,172,254,0.12); border:1px solid #4facfe; color:#4facfe; padding:6px 10px; border-radius:12px;">ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)</p>
                    </div>
                </div>

                <!-- SECTION: TOOLS -->
                <div id="section-tools" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุฃุฏูุงุช</span>
                        </div>
                        <p class="dev-badge" data-en="Coming soon โ Site under development โข Engineer (Bandar A.Abdullwahab)" data-ar="ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)" style="display:inline-block; background: rgba(79,172,254,0.12); border:1px solid #4facfe; color:#4facfe; padding:6px 10px; border-radius:12px;">ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)</p>
                    </div>
                </div>

                <!-- SECTION: SETTINGS -->
                <div id="section-settings" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุงูุฅุนุฏุงุฏุงุช</span>
                        </div>
                        <p class="dev-badge" data-en="Coming soon โ Site under development โข Engineer (Bandar A.Abdullwahab)" data-ar="ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)" style="display:inline-block; background: rgba(79,172,254,0.12); border:1px solid #4facfe; color:#4facfe; padding:6px 10px; border-radius:12px;">ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)</p>
                    </div>
                </div>

                <!-- SECTION: EMAIL -->
                <div id="section-email" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุงูููู</span>
                        </div>
                        <p class="dev-badge" data-en="Coming soon โ Site under development โข Engineer (Bandar A.Abdullwahab)" data-ar="ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)" style="display:inline-block; background: rgba(79,172,254,0.12); border:1px solid #4facfe; color:#4facfe; padding:6px 10px; border-radius:12px;">ูุฑุงูู ูุฑูุจุงู โ ุฌุงุฑู ุงูุชุทููุฑ ุนูู ุงููููุน โข ุงููููุฏุณ (Bandar A.Abdullwahab)</p>
                    </div>
                </div>

                <!-- SECTION: USERS -->
                <div id="section-users" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุงูุฃุนุถุงุก</span>
                            <button onclick="openAddUserModal()" class="btn btn-primary">ุฅุถุงูุฉ ูุณุชุฎุฏู +</button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ุงุณู ุงููุณุชุฎุฏู</th>
                                    <th>ุงูุตูุงุญูุฉ</th>
                                    <th>ุชุงุฑูุฎ ุงูุฅุถุงูุฉ</th>
                                    <th>ุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- SECTION: EMPLOYEES -->
                <div id="section-employees" class="d-none">
                    <div class="card-section" style="background: #1e293b; color: white; border: 1px solid #334155;">
                        <div class="section-header" style="border-bottom: 1px solid #334155;">
                            <span class="section-title" style="color: #60a5fa;">ุณุฌู ุงูููุธููู ุงูุดุงูู</span>
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="emp-search" placeholder="ุจุญุซ (ุงูุงุณูุ ุงููููุฉุ ุงููุฑุน)..." class="form-control" style="width: 250px; background: #0f172a; border: 1px solid #334155; color: white;">
                                <button onclick="generateRandomEmployees()" class="btn btn-secondary">๐ ุชูููุฏ ุจูุงูุงุช</button>
                                <button onclick="exportEmployees()" class="btn btn-primary">๐ ุชุตุฏูุฑ Excel</button>
                            </div>
                        </div>
                        
                        <div style="overflow-x: auto; margin-top: 15px;">
                            <table class="data-table" style="width: 100%; min-width: 1000px;">
                                <thead>
                                    <tr style="background: #0f172a;">
                                        <th id="th-emp">ุงูููุธู</th>
                                        <th id="th-iqama">ุฑูู ุงููููุฉ/ุงูุฅูุงูุฉ</th>
                                        <th id="th-brand">ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ</th>
                                        <th id="th-branch">ุงููุฑุน</th>
                                        <th id="th-region">ุงูููุทูุฉ</th>
                                        <th id="th-health">ุงูุดูุงุฏุฉ ุงูุตุญูุฉ</th>
                                        <th id="th-training">ุญุงูุฉ ุงูุชุฏุฑูุจ</th>
                                        <th id="th-view">ุนุฑุถ</th>
                                    </tr>
                                </thead>
                                <tbody id="employees-table-body">
                                    <!-- Dynamic Content -->
                                </tbody>
                            </table>
                        </div>
                        <div id="emp-pagination" style="margin-top: 20px; text-align: left; color: #94a3b8; font-size: 0.9rem;">
                            ุนุฑุถ 50 ูู ุฃุตู 1200 ููุธู
                        </div>
                    </div>
                </div>

                <!-- SECTION: CMS -->
                <div id="section-cms" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุชุนุฏูู ุจูุงูุงุช ุงูููุญุฉ (CMS)</span>
                            <div>
                                <button onclick="saveCMSData()" class="btn btn-primary">ุญูุธ ุงูุชุบููุฑุงุช</button>
                                <button onclick="resetCMSData()" class="btn btn-secondary">ุงุณุชุนุงุฏุฉ ุงูุงูุชุฑุงุถู</button>
                            </div>
                        </div>
                        <p id="save-msg" style="margin-bottom: 20px; color: var(--primary-color); font-weight: bold;"></p>

                        <div class="form-grid">
                            <!-- KPIs -->
                            <div style="border: 1px solid #eee; padding: 15px; border-radius: 8px;">
                                <h4 style="margin-top: 0; color: var(--secondary-color);">ุงููุคุดุฑุงุช ุงูุฑุฆูุณูุฉ (KPIs)</h4>
                                <div class="form-group">
                                    <label>ROI (ุงูุนุงุฆุฏ)</label>
                                    <input type="text" id="cms-roi" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Effectiveness (ุงูููุงุกุฉ)</label>
                                    <input type="text" id="cms-eff" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Risks (ุงููุฎุงุทุฑ)</label>
                                    <input type="text" id="cms-risk" class="form-control">
                                </div>
                            </div>

                            <!-- Projects -->
                            <div style="border: 1px solid #eee; padding: 15px; border-radius: 8px;">
                                <h4 style="margin-top: 0; color: var(--secondary-color);">ุงูุฃุฏุงุก ุงููุชููุน (Projects)</h4>
                                <div class="form-group">
                                    <label>Strengths (ููุงุท ุงูููุฉ)</label>
                                    <input type="text" id="cms-proj-strength" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Weaknesses (ููุงุท ุงูุถุนู)</label>
                                    <input type="text" id="cms-proj-weak" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Goal (ุงููุฏู)</label>
                                    <input type="text" id="cms-proj-goal" class="form-control">
                                </div>
                            </div>

                            <!-- Regions -->
                            <div style="border: 1px solid #eee; padding: 15px; border-radius: 8px;">
                                <h4 style="margin-top: 0; color: var(--secondary-color);">ุฃุฏุงุก ุงูุชุดุบูู (Regional)</h4>
                                <div class="form-group">
                                    <label>Western (ุงูุบุฑุจูุฉ)</label>
                                    <input type="text" id="cms-reg-west" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Central (ุงููุณุทู)</label>
                                    <input type="text" id="cms-reg-cen" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Eastern (ุงูุดุฑููุฉ)</label>
                                    <input type="text" id="cms-reg-east" class="form-control">
                                </div>
                            </div>

                            <!-- Depts -->
                            <div style="border: 1px solid #eee; padding: 15px; border-radius: 8px;">
                                <h4 style="margin-top: 0; color: var(--secondary-color);">ุฃุฏุงุก ุงูุฃูุณุงู (Depts)</h4>
                                <div class="form-group">
                                    <label>IT (ุงูุชูููุฉ)</label>
                                    <input type="text" id="cms-dept-it" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Finance (ุงููุงููุฉ)</label>
                                    <input type="text" id="cms-dept-fin" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Maintenance (ุงูุตูุงูุฉ)</label>
                                    <input type="text" id="cms-dept-maint" class="form-control">
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
                            <h4 style="color: var(--secondary-color);">ุงููุดุฑ ูููููุน ุงูุญู (GitHub)</h4>
                            <p style="font-size: 0.85rem; color: #777; margin-bottom: 10px;">
                                ูุฐุง ุงูุฎูุงุฑ ูููู ุจุชุญุฏูุซ <strong>ุงูุฃุฑูุงู ูุงูุจูุงูุงุช ููุท</strong> (ููู JSON) ูู ุงููููุน ุงูุญู.
                                ูุชุญุฏูุซ ุงูุชุตููู ูุงูุจุฑูุฌุฉุ ุงุณุชุฎุฏู ุงูููู <code>deploy.ps1</code> ุงููุฑูู.
                            </p>
                            <div style="display: flex; gap: 10px; align-items: flex-end;">
                                <div style="flex: 1;">
                                    <label style="font-size: 0.8rem; color: #777;">GitHub Token</label>
                                    <input type="password" id="gh-token" class="form-control" placeholder="ghp_xxxxxxxxxxxx">
                                    <small><a href="https://github.com/settings/tokens?type=beta" target="_blank" style="color: #6f42c1; text-decoration: underline;">ุฅูุดุงุก ุชููู ุฌุฏูุฏ (Generate Token) โ</a></small>
                                </div>
                                <button onclick="saveTokenAndPublish()" class="btn btn-primary" style="background-color: #6f42c1;">ุชุญุฏูุซ ุงูุจูุงูุงุช (Data Sync) ๐</button>
                            </div>
                            <div id="merge-mode-cms" style="margin-top: 12px; display:flex; gap:8px; align-items:center;">
                                <span id="lbl-merge-mode-cms" style="color:#333; font-size:0.9rem;">ูุถุน ุงูุฏูุฌ:</span>
                                <button class="btn btn-secondary" id="btn-mode-merge-cms">ุชุญุฏูุซ ููุท</button>
                                <button class="btn btn-secondary" id="btn-mode-replace-cms">ุงุณุชุจุฏุงู ูุงูู</button>
                            </div>
                            <div style="margin-top:8px; color:#555; font-size:0.85rem;">
                                <div id="desc-merge-update">ุชุญุฏูุซ ููุท: ุฏูุฌ ุฐูู ูุญุงูุธ ุนูู ุงูููุฌูุฏ ููุญุฏูุซ ุงูููู ููุถูู ุงูุฌุฏูุฏ.</div>
                                <div id="desc-merge-replace" style="margin-top:4px;">ุงุณุชุจุฏุงู ูุงูู: ูุณุชุจุฏู ุงููุงุฆูุฉ ุจุงููุงูู ุจุงููุตุฏุฑ ุงููุงุฏู.</div>
                                <div id="desc-merge-sources" style="margin-top:6px; color:#333;">ูุตุงุฏุฑ ุงูุชุญุฏูุซ: Excelุ JSON ูู GitHubุ JSON ูุญููุ ุชุนุฏูู ูุฏูู ุนุจุฑ ุงูููุญุฉ.</div>
                            </div>
                            <div id="update-time-settings" style="margin-top:12px; padding:10px; border:1px solid #eee; border-radius:8px; display:flex; gap:16px; align-items:flex-end; flex-wrap:wrap;">
                                <div style="display:flex; flex-direction:column; gap:6px;">
                                    <label id="lbl-show-update-time" style="font-size:0.85rem; color:#777;">ุนุฑุถ ุงูููุช ุจุฌุงูุจ ุขุฎุฑ ุชุญุฏูุซ</label>
                                    <input type="checkbox" id="chk-show-update-time">
                                </div>
                                <div style="display:flex; flex-direction:column; gap:6px;">
                                    <label id="lbl-date-format" style="font-size:0.85rem; color:#777;">ุชูุณูู ุงูุชุงุฑูุฎ</label>
                                    <select id="sel-date-format" class="form-control" style="min-width:180px;">
                                        <option value="locale" id="opt-format-locale">ูุญูู</option>
                                        <option value="iso" id="opt-format-iso">ISO</option>
                                        <option value="relative" id="opt-format-relative">ูุณุจู</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECTION: SERVICES -->
                <div id="section-services" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุตูุฏูู ุงูุดูุงูู</span>
                        </div>
                        <div id="complaints-list">
                            <!-- Complaints loaded here -->
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

            <div id="employee-modal" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.6); z-index:9999;">
        <div style="background:#0b0e2b; color:#fff; width:92%; max-width:900px; border-radius:16px; overflow:hidden;">
            <div id="emp-banner" style="height:140px; background:#0b0e2b;"></div>
            <div style="padding:20px;">
                <div style="display:flex; align-items:center; gap:15px; margin-top:-70px;">
                    <div style="position:relative; width:96px; height:96px;">
                        <div id="emp-avatar" style="width:96px; height:96px; border-radius:14px; background:#4facfe; color:#fff; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:1.6rem; overflow:hidden;">A</div>
                        <button id="btn-change-photo" class="btn btn-secondary" style="position:absolute; bottom:-10px; inset-inline-start:0; transform:translateY(50%); padding:4px 8px; font-size:0.75rem;">ุชุบููุฑ ุงูุตูุฑุฉ</button>
                        <input id="emp-photo" type="file" accept="image/*" style="display:none;">
                    </div>
                    <div>
                        <div id="emp-name-display" style="font-size:1.4rem; font-weight:700;"></div>
                        <div style="display: flex; gap: 10px; align-items: center; margin-top: 4px;">
                            <div id="emp-role-display" style="color:#4facfe; font-size:0.95rem; font-weight:bold;"></div>
                            <div id="emp-id-display" style="color:#94a3b8; font-size:0.85rem; background: rgba(255,255,255,0.1); padding: 2px 8px; border-radius: 4px;"></div>
                        </div>
                    </div>
                </div>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:24px;">
                    <div>
                        <label id="lbl-sap" style="display:block; color:#b0bec5; font-size:0.85rem;">SAP ID</label>
                        <input id="emp-sap" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-ref" style="display:block; color:#b0bec5; font-size:0.85rem;">REF#</label>
                        <input id="emp-ref" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-iqama" style="display:block; color:#b0bec5; font-size:0.85rem;">ID#</label>
                        <input id="emp-iqama" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-name" style="display:block; color:#b0bec5; font-size:0.85rem;">Name</label>
                        <input id="emp-name" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-band" style="display:block; color:#b0bec5; font-size:0.85rem;">Band</label>
                        <input id="emp-band" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-cost" style="display:block; color:#b0bec5; font-size:0.85rem;">Cost center</label>
                        <input id="emp-cost" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-ops1" style="display:block; color:#b0bec5; font-size:0.85rem;">Ops</label>
                        <input id="emp-ops1" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-hire" style="display:block; color:#b0bec5; font-size:0.85rem;">Hire date</label>
                        <input id="emp-hire" class="form-control" type="date" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-tede" style="display:block; color:#b0bec5; font-size:0.85rem;">T. E. D.E</label>
                        <input id="emp-tede" class="form-control" type="date" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-train-end" style="display:block; color:#b0bec5; font-size:0.85rem;">Training END Date</label>
                        <input id="emp-train-end" class="form-control" type="date" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <label id="lbl-status1" style="display:block; color:#b0bec5; font-size:0.85rem;">Status1</label>
                            <span id="badge-status1" style="font-size:0.75rem; padding:2px 8px; border-radius:4px; font-weight:bold; display:none;"></span>
                        </div>
                        <input id="emp-status1" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-days-train" style="display:block; color:#b0bec5; font-size:0.85rem;">Days Left - T.E.D.E</label>
                        <input id="emp-days-train" class="form-control" type="text" disabled style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-health" style="display:block; color:#b0bec5; font-size:0.85rem;">Health card expired Date</label>
                        <input id="emp-health" class="form-control" type="date" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <label id="lbl-status2" style="display:block; color:#b0bec5; font-size:0.85rem;">Status2</label>
                            <span id="badge-status2" style="font-size:0.75rem; padding:2px 8px; border-radius:4px; font-weight:bold; display:none;"></span>
                        </div>
                        <input id="emp-status2" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-days-health" style="display:block; color:#b0bec5; font-size:0.85rem;">Days Left - Health card</label>
                        <input id="emp-days-health" class="form-control" type="text" disabled style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-city" style="display:block; color:#b0bec5; font-size:0.85rem;">city</label>
                        <input id="emp-city" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div>
                        <label id="lbl-region" style="display:block; color:#b0bec5; font-size:0.85rem;">Region</label>
                        <input id="emp-region" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                    <div style="grid-column: span 2; border-top: 1px solid #334155; margin-top: 10px; padding-top: 10px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <input type="checkbox" id="emp-has-airport" style="width: 18px; height: 18px; cursor: pointer;">
                            <label for="emp-has-airport" id="lbl-has-airport" style="color: #4facfe; font-weight: bold; cursor: pointer;">ููุชูู ุชุตุฑูุญ ูุทุงุฑ / ุฃุฑุงููู</label>
                        </div>
                        
                        <div id="airport-card-section" style="display: none; background: rgba(15, 23, 42, 0.5); padding: 15px; border-radius: 8px; border: 1px solid #334155;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                <div>
                                    <label id="lbl-airport-no" style="display:block; color:#b0bec5; font-size:0.85rem;">Card Number</label>
                                    <input id="emp-airport-no" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                                </div>
                                <div>
                                    <label id="lbl-airport-expiry" style="display:block; color:#b0bec5; font-size:0.85rem;">Expiry Date</label>
                                    <input id="emp-airport-expiry" class="form-control" type="date" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                                </div>
                                <div style="grid-column: span 2;">
                                    <label id="lbl-airport-issuer" style="display:block; color:#b0bec5; font-size:0.85rem;">Issuing Authority / Region</label>
                                    <input id="emp-airport-issuer" class="form-control" type="text" placeholder="e.g. Riyadh Airport, Aramco Dhahran..." style="background:#0f172a; border:1px solid #334155; color:#fff;">
                                </div>
                                <div style="grid-column: span 2;">
                                    <label id="lbl-airport-photo" style="display:block; color:#b0bec5; font-size:0.85rem;">Card Photo</label>
                                    <input id="emp-airport-photo-input" class="form-control" type="file" accept="image/*" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                                    <div id="emp-airport-photo-preview" style="margin-top: 10px; max-width: 100%; height: 150px; border: 1px dashed #334155; display: flex; align-items: center; justify-content: center; overflow: hidden; border-radius: 6px;">
                                        <span style="color: #64748b; font-size: 0.8rem;">No image selected</span>
                                    </div>
                                    <button id="btn-remove-airport-photo" class="btn btn-secondary" style="margin-top: 5px; font-size: 0.8rem; display: none;">ุญุฐู ุงูุตูุฑุฉ</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="grid-column: span 2;">
                        <label id="lbl-remarks" style="display:block; color:#b0bec5; font-size:0.85rem;">Remarks</label>
                        <input id="emp-remarks" class="form-control" type="text" style="background:#0f172a; border:1px solid #334155; color:#fff;">
                    </div>
                </div>
                <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:20px;">
                    <button class="btn btn-secondary" id="btn-close-emp">ุฅูุบุงุก</button>
                    <button class="btn btn-primary" id="btn-save-emp">ุญูุธ</button>
                </div>
            </div>
        </div>
    </div
    

</body>
</html>
