<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุชุญูู ุงููุธุงู | Olayan Admin</title>
    <link rel="stylesheet" href="style-admin.css">
    <link rel="icon" type="image/svg+xml" href="olayan-mark.svg">
    <script src="admin.js" defer></script>
    <!-- app.js is needed for data fetching logic if we want to sync with board data -->
    <script src="app.js?v=5" defer></script>
</head>
<body class="admin-body ar">

    <!-- LOGIN SCREEN -->
    <div id="login-section" class="login-wrapper">
        <div class="login-box">
            <img src="olayan-logo.png" alt="Olayan Logo" style="height: 60px; margin-bottom: 20px;">
            <h2 style="color: var(--secondary-color); margin-bottom: 30px;">ุชุณุฌูู ุงูุฏุฎูู</h2>
            
            <div class="form-group text-right">
                <label>ุงุณู ุงููุณุชุฎุฏู</label>
                <input type="text" id="username" class="form-control" placeholder="User Name">
            </div>
            <div class="form-group text-right">
                <label>ูููุฉ ุงููุฑูุฑ</label>
                <input type="password" id="pin" class="form-control" placeholder="Password">
            </div>
            
            <button id="login" class="btn btn-primary" style="width: 100%; justify-content: center;">ุฏุฎูู</button>
            
            <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: center;">
                <button id="setup" class="btn btn-secondary" style="font-size: 0.8rem;">ุฅุนุฏุงุฏ ูุฃูู ูุฑุฉ</button>
            </div>
            
            <p id="msg" style="margin-top: 20px; color: #ff6b6b; font-size: 0.9rem;"></p>
        </div>
    </div>

    <!-- ADMIN DASHBOARD -->
    <div id="admin-content" class="admin-layout" style="display: none; width: 100%;">
        
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <img src="olayan-logo.png" class="sidebar-logo" alt="Logo">
                <span class="sidebar-brand">ููุญุฉ ุงูุชุญูู</span>
            </div>
            <nav class="sidebar-nav">
                <a href="#" onclick="showSection('dashboard')" class="nav-item active" id="nav-dashboard">
                    <i>๐</i> ููุฎุต ุงููุธุงู
                </a>
                <a href="#" onclick="showSection('users')" class="nav-item" id="nav-users">
                    <i>๐ฅ</i> ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
                </a>
                <a href="#" onclick="showSection('employees')" class="nav-item" id="nav-employees">
                    <i>๐</i> ุดุคูู ุงูููุธููู
                </a>
                <a href="#" onclick="showSection('cms')" class="nav-item" id="nav-cms">
                    <i>โ๏ธ</i> ุฅุนุฏุงุฏุงุช ุงูุจูุงูุงุช (CMS)
                </a>
                <a href="#" onclick="showSection('services')" class="nav-item" id="nav-services">
                    <i>๐ฉ</i> ุงูุดูุงูู ูุงูุทูุจุงุช
                </a>
                <div style="border-top: 1px solid #eee; margin: 10px 20px;"></div>
                <a href="tasks.html" target="_blank" class="nav-item">
                    <i>โ</i> ุฅุฏุงุฑุฉ ุงูููุงู
                </a>
                <a href="board.html" target="_blank" class="nav-item">
                    <i>๐</i> ุงูุฐูุงุจ ูููููุน
                </a>
            </nav>
            <div style="padding: 20px;">
                <button id="logout" class="btn btn-danger" style="width: 100%; justify-content: center;">ุชุณุฌูู ุฎุฑูุฌ</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <header class="admin-header">
                <div class="header-title" id="page-title">ููุฎุต ุงููุธุงู</div>
                <div class="header-actions">
                    <div class="user-profile">
                        <div class="text-right">
                            <div style="font-weight: bold; font-size: 0.9rem;" id="admin-user-name">Admin</div>
                            <div style="font-size: 0.8rem; color: #777;">ูุณุคูู ุงููุธุงู</div>
                        </div>
                        <div class="user-avatar">A</div>
                    </div>
                </div>
            </header>

            <div class="admin-content-wrapper">
                
                <!-- SECTION: DASHBOARD -->
                <div id="section-dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3 id="stat-users">3</h3>
                                <p>ุงููุณุชุฎุฏููู ุงููุดุทูู</p>
                            </div>
                            <div class="stat-icon">๐ฅ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3 id="stat-complaints">12</h3>
                                <p>ุงูุดูุงูู ุงูุฌุฏูุฏุฉ</p>
                            </div>
                            <div class="stat-icon">๐ฉ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3 id="stat-status" style="color: #4caf50;">98%</h3>
                                <p>ุญุงูุฉ ุงููุธุงู</p>
                            </div>
                            <div class="stat-icon">โ</div>
                        </div>
                    </div>

                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุขุฎุฑ ุงููุดุงุทุงุช</span>
                        </div>
                        <div id="activity-log" style="font-size: 0.9rem; color: #555;">
                            ุฌุงุฑู ุงูุชุญููู...
                        </div>
                    </div>
                </div>

                <!-- SECTION: USERS -->
                <div id="section-users" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ูุงุฆูุฉ ุงููุณุชุฎุฏููู</span>
                            <button onclick="openAddUserModal()" class="btn btn-primary">ุฅุถุงูุฉ ูุณุชุฎุฏู +</button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ุงุณู ุงููุณุชุฎุฏู</th>
                                    <th>ุงูุตูุงุญูุฉ</th>
                                    <th>ุชุงุฑูุฎ ุงูุฅุถุงูุฉ</th>
                                    <th>ุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- SECTION: EMPLOYEES -->
                <div id="section-employees" class="d-none">
                    <div class="card-section" style="background: #1e293b; color: white; border: 1px solid #334155;">
                        <div class="section-header" style="border-bottom: 1px solid #334155;">
                            <span class="section-title" style="color: #60a5fa;">ุณุฌู ุงูููุธููู ุงูุดุงูู</span>
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="emp-search" placeholder="ุจุญุซ (ุงูุงุณูุ ุงููููุฉุ ุงููุฑุน)..." class="form-control" style="width: 250px; background: #0f172a; border: 1px solid #334155; color: white;">
                                <button onclick="generateRandomEmployees()" class="btn btn-secondary">๐ ุชูููุฏ ุจูุงูุงุช</button>
                                <button onclick="exportEmployees()" class="btn btn-primary">๐ ุชุตุฏูุฑ Excel</button>
                            </div>
                        </div>
                        
                        <div style="overflow-x: auto; margin-top: 15px;">
                            <table class="data-table" style="width: 100%; min-width: 1000px;">
                                <thead>
                                    <tr style="background: #0f172a;">
                                        <th>ุงูููุธู</th>
                                        <th>ุฑูู ุงููููุฉ/ุงูุฅูุงูุฉ</th>
                                        <th>ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ</th>
                                        <th>ุงููุฑุน</th>
                                        <th>ุงูููุทูุฉ</th>
                                        <th>ุงูุดูุงุฏุฉ ุงูุตุญูุฉ</th>
                                        <th>ุญุงูุฉ ุงูุชุฏุฑูุจ</th>
                                        <th>ุนุฑุถ</th>
                                    </tr>
                                </thead>
                                <tbody id="employees-table-body">
                                    <!-- Dynamic Content -->
                                </tbody>
                            </table>
                        </div>
                        <div id="emp-pagination" style="margin-top: 20px; text-align: left; color: #94a3b8; font-size: 0.9rem;">
                            ุนุฑุถ 50 ูู ุฃุตู 1200 ููุธู
                        </div>
                    </div>
                </div>

                <!-- SECTION: CMS -->
                <div id="section-cms" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุชุนุฏูู ุจูุงูุงุช ุงูููุญุฉ (CMS)</span>
                            <div>
                                <button onclick="saveCMSData()" class="btn btn-primary">ุญูุธ ุงูุชุบููุฑุงุช</button>
                                <button onclick="resetCMSData()" class="btn btn-secondary">ุงุณุชุนุงุฏุฉ ุงูุงูุชุฑุงุถู</button>
                            </div>
                        </div>
                        <p id="save-msg" style="margin-bottom: 20px; color: var(--primary-color); font-weight: bold;"></p>

                        <div class="form-grid">
                            <!-- KPIs -->
                            <div style="border: 1px solid #eee; padding: 15px; border-radius: 8px;">
                                <h4 style="margin-top: 0; color: var(--secondary-color);">ุงููุคุดุฑุงุช ุงูุฑุฆูุณูุฉ (KPIs)</h4>
                                <div class="form-group">
                                    <label>ROI (ุงูุนุงุฆุฏ)</label>
                                    <input type="text" id="cms-roi" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Effectiveness (ุงูููุงุกุฉ)</label>
                                    <input type="text" id="cms-eff" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Risks (ุงููุฎุงุทุฑ)</label>
                                    <input type="text" id="cms-risk" class="form-control">
                                </div>
                            </div>

                            <!-- Projects -->
                            <div style="border: 1px solid #eee; padding: 15px; border-radius: 8px;">
                                <h4 style="margin-top: 0; color: var(--secondary-color);">ุงูุฃุฏุงุก ุงููุชููุน (Projects)</h4>
                                <div class="form-group">
                                    <label>Strengths (ููุงุท ุงูููุฉ)</label>
                                    <input type="text" id="cms-proj-strength" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Weaknesses (ููุงุท ุงูุถุนู)</label>
                                    <input type="text" id="cms-proj-weak" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Goal (ุงููุฏู)</label>
                                    <input type="text" id="cms-proj-goal" class="form-control">
                                </div>
                            </div>

                            <!-- Regions -->
                            <div style="border: 1px solid #eee; padding: 15px; border-radius: 8px;">
                                <h4 style="margin-top: 0; color: var(--secondary-color);">ุฃุฏุงุก ุงูุชุดุบูู (Regional)</h4>
                                <div class="form-group">
                                    <label>Western (ุงูุบุฑุจูุฉ)</label>
                                    <input type="text" id="cms-reg-west" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Central (ุงููุณุทู)</label>
                                    <input type="text" id="cms-reg-cen" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Eastern (ุงูุดุฑููุฉ)</label>
                                    <input type="text" id="cms-reg-east" class="form-control">
                                </div>
                            </div>

                            <!-- Depts -->
                            <div style="border: 1px solid #eee; padding: 15px; border-radius: 8px;">
                                <h4 style="margin-top: 0; color: var(--secondary-color);">ุฃุฏุงุก ุงูุฃูุณุงู (Depts)</h4>
                                <div class="form-group">
                                    <label>IT (ุงูุชูููุฉ)</label>
                                    <input type="text" id="cms-dept-it" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Finance (ุงููุงููุฉ)</label>
                                    <input type="text" id="cms-dept-fin" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Maintenance (ุงูุตูุงูุฉ)</label>
                                    <input type="text" id="cms-dept-maint" class="form-control">
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
                            <h4 style="color: var(--secondary-color);">ุงููุดุฑ ูููููุน ุงูุญู (GitHub)</h4>
                            <p style="font-size: 0.85rem; color: #777; margin-bottom: 10px;">
                                ูุฐุง ุงูุฎูุงุฑ ูููู ุจุชุญุฏูุซ <strong>ุงูุฃุฑูุงู ูุงูุจูุงูุงุช ููุท</strong> (ููู JSON) ูู ุงููููุน ุงูุญู.
                                ูุชุญุฏูุซ ุงูุชุตููู ูุงูุจุฑูุฌุฉุ ุงุณุชุฎุฏู ุงูููู <code>deploy.ps1</code> ุงููุฑูู.
                            </p>
                            <div style="display: flex; gap: 10px; align-items: flex-end;">
                                <div style="flex: 1;">
                                    <label style="font-size: 0.8rem; color: #777;">GitHub Token</label>
                                    <input type="password" id="gh-token" class="form-control" placeholder="ghp_xxxxxxxxxxxx">
                                </div>
                                <button onclick="saveTokenAndPublish()" class="btn btn-primary" style="background-color: #6f42c1;">ุชุญุฏูุซ ุงูุจูุงูุงุช (Data Sync) ๐</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SECTION: SERVICES -->
                <div id="section-services" class="d-none">
                    <div class="card-section">
                        <div class="section-header">
                            <span class="section-title">ุตูุฏูู ุงูุดูุงูู</span>
                        </div>
                        <div id="complaints-list">
                            <!-- Complaints loaded here -->
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Add User Modal (Hidden by default, simple prompt used for now or custom modal) -->

</body>
</html>
